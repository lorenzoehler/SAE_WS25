---
title: "Combined Reports"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(htmltools)
```


```{r}
# Names of your existing HTML files
html_files <- list.files("../syntax/",pattern = "html$")

## correct order and only include important ones
# dput(html_files)
html_files <- c("01-preprocessing.html", "01exA-variable_selection.html", "01exB-correlation_matrix.html", 
"02-processing.html", "03-sampling_frame.html", "03exA-SAE_models.html", 
"05-processing_results.html", "05exp-visuals.html", "05expB-Bias.html")

# Custom tab labels
tab_labels <- c("Preprocess", "Variable Selection-1", "Variable Selection-2", "Dummy Coding", "Sampling-Frame", "Fit Modles","Results Prep","Results","Bias")


# Create tab buttons with custom names
tabs <- lapply(seq_along(html_files), function(i) {
  tags$li(
    class = "nav-item",
    tags$button(
      class = if(i == 1) "nav-link active" else "nav-link",
      `data-bs-toggle` = "tab",
      `data-bs-target` = paste0("#tab", i),
      tab_labels[i]   # <- Use custom label here
    )
  )
})

# Tab content
tab_content <- lapply(seq_along(html_files), function(i) {
  tags$div(
    class = if(i == 1) "tab-pane fade show active" else "tab-pane fade",
    id = paste0("tab", i),
    tags$iframe(
      src = html_files[i],
      width = "100%",
      height = "800px",
      style = "border:none;"
    )
  )
})

# Combine everything
combined <- tags$html(
  tags$head(
  tags$link(rel = "stylesheet", href = "https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"),
  tags$style(HTML("
    /* Tab bar background */
    .nav-tabs { 
      background-color: #f0f0f0; 
      border-bottom: 2px solid #ccc; 
    }
    /* Inactive tabs */
    .nav-tabs .nav-link { 
      color: #333; 
      background-color: #f0f0f0; 
      border: 1px solid transparent; 
      margin-right: 2px; 
    }
    /* Active tab */
    .nav-tabs .nav-link.active { 
      background-color: #ddd; 
      color: #000; 
      border-color: #ccc #ccc #ddd; 
      font-weight: bold; 
    }
  "))
),
  tags$body(
    tags$ul(class = "nav nav-tabs", tabs),
    tags$div(class = "tab-content", tab_content),
    tags$script(src = "https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js")
  )
)

# Save as one HTML
save_html(combined, file = "combined.html")
```

